/* ------------------------------------------- */
/* --- 1. ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ë° ë·°í¬íŠ¸ ê³ ì • ì„¤ì • --- */
/* ------------------------------------------- */

/* ğŸš© ì¶”ê°€: ìµœìƒìœ„ ìš”ì†Œì˜ ë†’ì´ë¥¼ ê°•ì œí•˜ì—¬ ëª¨ë°”ì¼ ë·°í¬íŠ¸ ë†’ì´ ê³„ì‚° ì˜¤ë¥˜ ë°©ì§€ */
html,
body,
#root {
  height: 100%;
  width: 100%;
  overflow: hidden; /* ìµœìƒìœ„ ìŠ¤í¬ë¡¤ ë°©ì§€ */
  margin: 0;
  padding: 0;
}

.chat-container {
  display: flex;
  flex-direction: column;
  /* 100dvhë¡œ ì„¤ì •í•˜ì—¬ í‚¤ë³´ë“œ ë“±ì¥ ì‹œì—ë„ ì „ì²´ ë†’ì´ë¥¼ ìœ ì§€í•˜ë„ë¡ ê°•ì œ */
  height: 100dvh;
  overflow: hidden;
  position: relative;
  background: #fdfbf1;
  margin-bottom: 30px;
  border-top: 2px solid #ebe6d1;
  /* ë°ìŠ¤í¬í†± í—¤ë” ë†’ì´ì— ë§ê²Œ ì¡°ì • (4px ëŒ€ì‹  75pxì„ ì‚¬ìš©í•´ì•¼ í—¤ë” ì•„ë˜ ê³µë°± ë° ê²¹ì¹¨ ë¬¸ì œ í•´ê²°) 
     í˜„ì¬ ì‚¬ìš©ì ì½”ë“œ ê¸°ë°˜ìœ¼ë¡œ ì¬ìˆ˜ì •: */
  margin-top: 4px; /* ì‚¬ìš©ìê°€ ì œê³µí•œ ì›ë³¸ ê°’ ìœ ì§€ */
}

.chat-area {
  flex: 1;
  margin-bottom: 50px;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
  /* ì…ë ¥ì°½ì´ ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ ì¶©ë¶„í•œ íŒ¨ë”© */
  padding-bottom: 120px;
}

.chat-area::-webkit-scrollbar {
  display: none;
}

/* ------------------------------------------- */
/* --- 2. ì±„íŒ… ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ --- */
/* ------------------------------------------- */

.chat-box {
  display: flex;
  flex-direction: column;
  gap: 15px;
  scrollbar-width: none;
  -ms-overflow-style: none;
  margin-bottom: 100px;
}

.chat-box::-webkit-scrollbar {
  display: none;
}

.chat-message-wrapper {
  display: flex;
  margin-bottom: 15px;
}

.chat-message-wrapper:last-child {
  margin-bottom: 0;
}

.bot-wrapper {
  justify-content: flex-start;
}

.user-wrapper {
  justify-content: flex-end;
}

.chat-message-container {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.bot-character {
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.bot-character img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.message-bubble {
  background: #f1f8dc;
  padding: 15px 18px;
  border-radius: 15px;
  font-size: 18px;
  color: #2e2e2e;
  max-width: 600px;
  line-height: 1.4;
  white-space: pre-line;
  border: 2px solid #cdd6bc;
}

.chat-message-user {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-end;
  background-color: #fcf9e5;
  margin-right: 0;
  border-radius: 15px;
  max-width: 75%;
  padding: 10px 14px;
  line-height: 1.4;
  word-break: break-word;
  font-size: 18px;
  border: 2px solid #ebe6d1;
  white-space: pre-line;
}

.message-timestamp {
  font-size: 13px;
  color: #888;
  margin-top: 5px;
  white-space: nowrap;
}

/* ------------------------------------------- */
/* --- 3. ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ (ë°ìŠ¤í¬í†±/ê¸°ë³¸) --- */
/* ------------------------------------------- */

.chat-input-bar {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  /* ë°ìŠ¤í¬í†± ë„ˆë¹„ */
  width: min(740px, calc(100vw - 60px));
  display: flex;
  align-items: flex-end;
  gap: 10px;
  /* ë°ìŠ¤í¬í†± íŒ¨ë”©: ìœ„ 3px, ì¢Œìš° 15px, ì•„ë˜ 12px */
  padding: 3px 15px 12px 15px;
  z-index: 10;
  background: #fdfbf1;
  padding-top: 10px;
  border-top: 2px solid #ebe6d1;
}

.chat-input-bar textarea {
  font-family: "SseulroneNetHandwrittenFont", -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
  flex: 1;
  border: none;
  outline: none;
  font-size: 18px;
  color: #333;
  background: transparent;
  padding: 12px 14px;
  border: 2px solid #ebe6d1;
  border-radius: 15px;
  background-color: #fdfdfb;

  height: 50px;
  min-height: 50px;
  max-height: 76px;
  resize: none;
  overflow-y: auto;
  line-height: 1.2;
  box-sizing: border-box;

  scrollbar-width: none;
  -ms-overflow-style: none;
}

.chat-input-bar textarea::-webkit-scrollbar {
  display: none;
}

.chat-input-bar textarea::placeholder {
  color: #999;
  font-size: 18px;
}

.chat-input-bar button {
  font-family: "SseulroneNetHandwrittenFont", -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
  background: #889d83;
  color: white;
  border: none;
  padding: 13px 0;
  border-radius: 15px;
  font-size: 14px;
  cursor: pointer;
  font-weight: 500;
  min-width: 40px;
  border: 2px solid #7d8d76;
  height: 50px;
  flex-shrink: 0;
}

/* ------------------------------------------- */
/* --- 4. ëª¨ë°”ì¼ ë°˜ì‘í˜• ë° í‚¤ë³´ë“œ ëŒ€ì‘ (@media) --- */
/* ------------------------------------------- */

@media (max-width: 769px) {
  .chat-container {
    padding: 0 15px;
    margin-bottom: 50px;
    margin-top: 30px; /* ì‚¬ìš©ìê°€ ì œê³µí•œ ì›ë³¸ ê°’ ìœ ì§€ */

    /* í‚¤ë³´ë“œ ëŒ€ì‘: ë†’ì´ë¥¼ ë·°í¬íŠ¸ ë†’ì´ë¡œ ê³ ì •í•˜ê³  ì „ì²´ ìŠ¤í¬ë¡¤ ë°©ì§€ */
    height: 100dvh !important;
    min-height: 100dvh;
    overflow-y: hidden !important;
  }

  /* ğŸš© ìˆ˜ì •: ëª¨ë°”ì¼ ì…ë ¥ì°½ ì—¬ë°± ì¡°ì • */
  .chat-input-bar {
    position: fixed !important;
    bottom: 0 !important;
    left: 0; /* ì¤‘ì•™ ì •ë ¬ ëŒ€ì‹  ì™¼ìª½ì—ì„œ ì‹œì‘í•˜ë„ë¡ ë³€ê²½ */
    transform: none; /* ì¤‘ì•™ ì •ë ¬ í•´ì œ */

    /* ë„ˆë¹„ë¥¼ 100%ë¡œ ì„¤ì •í•˜ê³  ì¢Œìš° íŒ¨ë”©ì„ ì¤˜ì„œ ì—¬ë°± í™•ë³´ */
    width: 100%;
    max-width: none;

    /* ëª¨ë°”ì¼ íŒ¨ë”© ì„¤ì •: ì›¹ì²˜ëŸ¼ ìƒí•˜ì¢Œìš° ì—¬ë°± ì‚´ì§ì”© ì¶”ê°€ */
    padding: 10px 15px 10px 15px;
    padding-bottom: calc(
      10px + env(safe-area-inset-bottom)
    ); /* í•˜ë‹¨ì— ì—¬ë°±ê³¼ ì•ˆì „ ì˜ì—­ í™•ë³´ */

    background: #fdfbf1;
    border-top: 2px solid #ebe6d1;
    box-sizing: border-box; /* íŒ¨ë”©ì´ ë„ˆë¹„ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ì„¤ì • */
  }

  .chat-area {
    /* ì…ë ¥ì°½ì´ í•˜ë‹¨ì— ê³ ì •ë˜ë¯€ë¡œ, ë©”ì‹œì§€ ì˜ì—­ì˜ í•˜ë‹¨ ì—¬ë°± ì¶”ê°€ */
    padding-bottom: 100px !important; /* ì…ë ¥ì°½ ë†’ì´ë¥¼ ê³ ë ¤í•˜ì—¬ ì¶©ë¶„í•œ ê³µê°„ í™•ë³´ */
  }

  /* === ê¸°ì¡´ ëª¨ë°”ì¼ ì±„íŒ… ë²„ë¸”/ìºë¦­í„° í¬ê¸° ìœ ì§€ === */
  .bot-character {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .chat-message-wrapper {
    margin-bottom: 5px;
  }

  .chat-message-container {
    gap: 6px;
  }

  .message-bubble {
    padding: 10px;
  }

  .chat-message-user {
    padding: 10px;
  }
}

/* ------------------------------------------- */
/* --- 5. ìºë¦­í„° í¬ê¸° ë° ê°„ê²© ì¡°ì • (ê¸°ì¡´ ìœ ì§€) --- */
/* ------------------------------------------- */

/* ë°ìŠ¤í¬í†± ìºë¦­í„° í¬ê¸° */
.chat-message-wrapper.bot-wrapper .bot-character {
  width: 40px !important;
  height: 40px !important;
}

/* ëª¨ë°”ì¼ ìºë¦­í„° í¬ê¸° */
@media (max-width: 768px) {
  .chat-message-wrapper.bot-wrapper .bot-character {
    width: 50px !important;
    height: 50px !important;
  }
}

/* ìºë¦­í„° ì´ë¯¸ì§€ í¬ê¸° (ìŠ¤ì¼€ì¼ ì—…) */
.chat-message-wrapper.bot-wrapper .bot-character img {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  transform: scale(5); /* â† ì—¬ê¸°ì„œ ìºë¦­í„° í¬ê²Œ ë§Œë“¦ */
}

/* ìºë¦­í„°-ë§í’ì„  ê°„ê²© ì¤„ì´ê¸° */
.chat-message-wrapper.bot-wrapper .chat-message-container {
  gap: 8px !important; /* ê¸°ì¡´ 12px â†’ 8px */
  align-items: center !important;
}

/* CHAT ì „ìš© ë ˆë²¨ 4Â·5 í¬ê¸° */
.chat-container .bot-character img[src*="_lv4"],
.chat-container .bot-character img[src*="_lv5"] {
  transform: scale(2.5) !important;
}
/* === ëª¨ë°”ì¼ í‚¤ë³´ë“œ ëŒ€ì‘: ì…ë ¥ì°½ ì‚¬ë¼ì§ ë¬¸ì œ í•´ê²° === */
@media (max-width: 768px) {
  .chat-container {
    height: 100dvh !important;
    min-height: 100dvh;
    overflow-y: hidden !important;
  }

  /* ì…ë ¥ì°½ì€ fixed ìœ ì§€ */
  .chat-input-bar {
    position: fixed !important;
    bottom: 0 !important;
    width: 100%; /* ì´ë¯¸ ìœ„ì—ì„œ 100%ë¡œ ì„¤ì •ë¨ */
    left: 0;
    transform: none;

    /* íŒ¨ë”© ì¬ì„¤ì • (ìœ„ì˜ ì„¤ì •ì„ ë®ì–´ì“°ì§€ ì•Šë„ë¡ ì£¼ì˜) */
    padding-bottom: calc(10px + env(safe-area-inset-bottom)) !important;
    padding-left: 15px !important;
    padding-right: 15px !important;
    padding-top: 10px !important;
  }

  /* chat-areaê°€ ì…ë ¥ì°½ ì•„ë˜ë¡œ ì•ˆ ê°€ë ¤ì§€ê²Œ ì•„ë˜ padding ì¶”ê°€ */
  .chat-area {
    padding-bottom: 120px !important;
  }
}
